(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e){e.exports={a:"river"}},136:function(e,t,n){e.exports=n(223)},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"definations",function(){return Me}),n.d(a,"dictionaries",function(){return Pe});var r={};n.r(r),n.d(r,"defination",function(){return Ue}),n.d(r,"word",function(){return Fe});var c=n(0),i=n.n(c),u=n(8),o=n(25),l=n(22),s=n(119),d=n(28),f=n(18),p=n(19),m="INCRESDE_WORD_SEARCH_COUNT",b="REQUEST_FETCHING_WORD",v="SUCCESS_FETCHING_WORD",y="REJECT_FETCHING_WORD",h=Object(o.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload.id;default:return e}},name:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},explanations:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},searchCounter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case m:return e+1;default:return e}},isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case b:return!0;case v:case y:return!1;default:return e}}}),E="ADD_DICTIONARY",O="DEL_DICTIONARY",g="MAP_DEFINATION_TO_DICTIONARY",j="UNMAP_DEFINATION_TO_DICTIONARY",w="ADD_ENTITIES",I="RESTORE_FROM_INDEXEDDB",k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type.includes("WORD"))return Object(f.a)({},e,Object(d.a)({},t.payload.id,h(e[t.payload.id],t)));switch(t.type){case w:case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.words,function(n){return h(Object(f.a)({},e[n.id],n),t)}));default:return e}},x=n(77),S=n(76),_=Object(o.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.id;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.name;default:return e}},definations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return[].concat(Object(S.a)(e),[t.payload.definationId]);case j:return e.filter(function(e){return e!==t.payload.definationId});default:return e}}});function C(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var N=_(void 0,{type:"@@INIT"}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d.a)({},N.id,N),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=_(void 0,t);return Object(f.a)({},e,Object(d.a)({},n.id,n));case O:var a=t.payload.dictionaryId;return e[a],Object(x.a)(e,[a].map(C));case g:case j:return Object(f.a)({},e,Object(d.a)({},t.payload.dictionaryId,_(e[t.payload.dictionaryId],t)));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.dictionaries,function(n){return _(Object(f.a)({},e[n.id],n),t)}));default:return e}},D=Object(o.b)({id:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},word:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},level:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},domain:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},text:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},translate:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},examples:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},dictionaries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return[].concat(Object(S.a)(e),[t.payload.dictionaryId]);case j:return e.filter(function(e){return e!==t.payload.dictionaryId});default:return e}}}),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return D(Object(f.a)({},e[n.id],n,{word:t.result}),t)}));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return D(Object(f.a)({},e[n.id],n),t)}));case g:case j:return Object(f.a)({},e,Object(d.a)({},t.payload.definationId,D(e[t.payload.definationId],t)));default:return e}},A=Object(o.b)({words:k,dictionaries:R,definations:T}),M=n(15),P=n.n(M),U=n(24),F=n(29),W=n(55),K="/river";function L(e){return i.a.createElement(W.b,Object.assign({basepath:K},e))}function H(e){var t=e.to,n=Object(x.a)(e,["to"]);return i.a.createElement(W.a,Object.assign({to:K+t},n))}function B(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return W.c.apply(void 0,[K+e].concat(n))}var V=n(234),Y=n(224),G=n(233),J=n(9),q=n(236),Q=n(133);function X(e){var t=e.children;return i.a.createElement("div",null,t)}var z=n(228),Z=n(97),$=n(129),ee=n(232),te=n(227),ne=n(231),ae=n(235),re=n(229),ce=n(58),ie="https://river.qas612820704.now.sh";function ue(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(U.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ie,"/cambridge/english-chinese-traditional/auto-complete/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e){return se.apply(this,arguments)}function se(){return(se=Object(U.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ie,"/cambridge/english-chinese-traditional/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t){return function(n,a){return a().definations[e].dictionaries.includes(t)?n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var c=r.db;n({type:j,payload:{dictionaryId:t,definationId:e}});var i=a().dictionaries[t];c.dictionaries.set(t,i),c.definations.delete(e)}}(e,t)):n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var c=r.db;n({type:g,payload:{dictionaryId:t,definationId:e}});var i=a().dictionaries[t],u=a().definations[e];c.dictionaries.set(t,i),c.definations.set(e,u)}}(e,t))}}function fe(e,t){return{type:w,payload:e,result:t}}function pe(e){var t,n=Object(l.c)(Object(c.useCallback)(function(t){return t.words[e]},[e])),a=Object(l.b)();return Object(c.useEffect)(function(){},[e]),n||a((t=e,function(){var e=Object(U.a)(P.a.mark(function e(n,a,r){var c,i,u;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.schema,a().words[t]){e.next=17;break}return n({type:b,payload:{id:t}}),e.prev=4,e.next=7,le(t);case 7:i=e.sent,u=Object(ce.a)(i,c.word),n(fe(u.entities,u.result)),n({type:v,payload:{id:t}}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),n({type:y,payload:{id:t}});case 17:return e.abrupt("return",a().words[t]);case 18:case"end":return e.stop()}},e,null,[[4,13]])}));return function(t,n,a){return e.apply(this,arguments)}}())),{word:n}}var me=z.a.Title,be=z.a.Paragraph,ve=Z.a.TabPane;function ye(e){var t=e.wordId,n=pe(t).word;return n?i.a.createElement("section",{style:{margin:"16px 0"}},i.a.createElement($.a,{spinning:n.isFetching},i.a.createElement(me,null,t),i.a.createElement(Z.a,null,n.explanations.map(function(e){return i.a.createElement(ve,{tab:i.a.createElement("span",null,i.a.createElement(Y.a,{style:{background:"#008dff",marginRight:8}},e.pos),e.pos),key:e.pos},function(e){return i.a.createElement("div",null,i.a.createElement(be,{style:{marginBottom:16}},i.a.createElement(J.a,{type:"notification",style:{marginRight:16}}),i.a.createElement(ge,Object.assign({region:"US"},e.ipaUS)),i.a.createElement(ge,Object.assign({region:"UK"},e.ipaUK))),i.a.createElement(te.a,{itemLayout:"vertical",dataSource:e.senses,renderItem:he}))}(e))})))):i.a.createElement($.a,null,i.a.createElement(ee.a,null))}function he(e){return i.a.createElement(te.a.Item,null,e.guideWord&&i.a.createElement(me,{level:4},i.a.createElement(J.a,{type:"radar-chart",style:{marginRight:8}}),e.guideWord),i.a.createElement(te.a,{bordered:!0,itemLayout:"vertical",dataSource:e.definations,renderItem:function(e){return i.a.createElement(Ee,{definationId:e})}}))}function Ee(e){var t=e.definationId,n=function(e){return{defination:Object(l.c)(Object(c.useCallback)(function(t){return t.definations[e]},[e]))}}(t).defination,a=Object(c.useState)(!1),r=Object(F.a)(a,2),u=r[0],o=r[1],s=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]),d=Object(l.b)(),f=Object(c.useCallback)(function(e,t){return d(de(e,t))},[]),m=i.a.createElement(G.a,{onMouseLeave:function(){return o(!1)}},s.map(function(e){return i.a.createElement(G.a.Item,{key:e.id},i.a.createElement(ne.a,{checked:e.definations.includes(t),onChange:function(){return f(t,e.id)}},e.name))}));return i.a.createElement(te.a.Item,{style:{flexDirection:"column"}},i.a.createElement(te.a.Item.Meta,{title:i.a.createElement("span",null,i.a.createElement(ae.a,{style:{marginRight:8,background:"#52c41a"},count:n.level}),n.text),description:i.a.createElement("span",null,i.a.createElement(re.a,{overlay:m,visible:u,onMouseEnter:function(){return o(!0)}},i.a.createElement(J.a,{type:"plus",style:{marginRight:8,cursor:"pointer"}})),i.a.createElement("span",{style:{color:"#1890ff"}},n.translate))}),i.a.createElement(te.a,{itemLayout:"vertical",dataSource:n.examples,renderItem:Oe}))}function Oe(e){return i.a.createElement(te.a.Item,null,i.a.createElement(be,null,e.text),i.a.createElement(be,{style:{color:"#40a9ff"}},e.translate))}function ge(e){var t=e.region,n=e.html,a=e.audioUrl,r=Object(c.useState)(!1),u=Object(F.a)(r,2),o=u[0],l=u[1],s=Object(c.useMemo)(function(){return new Audio(a)},[a]);Object(c.useEffect)(function(){s.addEventListener("ended",function(){l(!1)})},[s]);var d=Object(c.useCallback)(function(){l(!0),s.play()},[s]);return i.a.createElement("span",{style:{marginRight:16,cursor:"pointer"},onClick:d},i.a.createElement(Y.a,{style:{marginRight:8,background:o?"#fa8c16":""}},t),"/",i.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),"/")}var je=n(230);function we(e){var t=e.dictionaryId,n=Object(l.c)(Object(c.useCallback)(function(e){var n=e.dictionaries[t];if(n)return Object(f.a)({},n,{definations:n.definations.map(function(t){return e.definations[t]})})},[t]));return n?i.a.createElement(te.a,{grid:{gutter:16,column:4},dataSource:n.definations,renderItem:Ie}):i.a.createElement($.a,null)}function Ie(e){return i.a.createElement(te.a.Item,null,i.a.createElement(je.a,null,i.a.createElement(je.a.Meta,{title:i.a.createElement("span",null,i.a.createElement(ae.a,{style:{marginRight:8,background:"#52c41a"},count:e.level}),i.a.createElement(H,{to:"/words/".concat(e.word)},e.word)),description:e.translate})))}function ke(){return i.a.createElement("div",null,i.a.createElement(W.b,null,i.a.createElement(xe,{path:"/"}),i.a.createElement(we,{path:":dictionaryId"})))}function xe(){var e=Object(c.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(l.b)(),u=Object(c.useCallback)(function(){var e;a(""),r((e={name:n},function(t,n,a){var r=a.db,c=e.name;t({type:E,payload:Object(f.a)({id:c},e)});var i=n().dictionaries[c];r.dictionaries.set(c,i)}))},[n]),o=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]);return i.a.createElement("div",null,i.a.createElement(Q.a,{value:n,onChange:function(e){return a(e.target.value)},onPressEnter:u,placeholder:"Add dictionary",suffix:i.a.createElement(J.a,{onClick:u,type:"plus"}),style:{marginBottom:"2em"}}),i.a.createElement(te.a,{grid:{gutter:16,column:4},dataSource:o,renderItem:function(e){return i.a.createElement(Se,{dictionary:e})}}))}function Se(e){var t=e.dictionary,n=Object(l.b)(),a=Object(c.useCallback)(function(){return n((e=t.id,function(t,n,a){var r=a.db;t({type:O,payload:{dictionaryId:e}}),r.dictionaries.delete(e)}));var e},[t.id]);return i.a.createElement(te.a.Item,{style:{cursor:"pointer"},onClick:function(){return B("/dictionaries/".concat(t.id))}},i.a.createElement(je.a,null,i.a.createElement(je.a.Meta,{title:i.a.createElement("span",null,"default"!==t.id&&i.a.createElement(J.a,{type:"minus",style:{marginRight:8,color:"#f5222d"},onClick:a}),t.name)})))}n(221);var _e=V.a.Header,Ce=V.a.Content,Ne=V.a.Sider;function Re(e){var t=e.children,n=function(){var e=Object(l.c)(Object(c.useCallback)(function(e){return e.dictionaries},[]));return{dictionaries:Object(p.map)(e)}}().dictionaries,a=function(){var e=Object(c.useState)([]),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(c.useCallback)(function(){var e=Object(U.a)(P.a.mark(function e(t){var n,r;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue(t);case 4:n=e.sent,r=n.results,a(r.map(function(e){return e.searchtext}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);return[n,r]}(),r=Object(F.a)(a,2),u=r[0],o=r[1],s=Object(c.useCallback)(function(e){return B("/words/".concat(e))},[]);return i.a.createElement(V.a,null,i.a.createElement(Ne,{className:"sider",collapsible:!0,collapsedWidth:"0"},i.a.createElement("div",{className:"sider__brand"},i.a.createElement(Y.a,{className:"sider__brand__avatar"},"R")),i.a.createElement(G.a,{theme:"dark",mode:"inline",defaultOpenKeys:["dictionaries"]},i.a.createElement(G.a.SubMenu,{key:"dictionaries",title:i.a.createElement("span",null,i.a.createElement(J.a,{type:"book"}),i.a.createElement("span",null,"Dictionaries"))},n.map(function(e){return i.a.createElement(G.a.Item,{key:e.id},i.a.createElement(H,{to:"/dictionaries/".concat(e.id)},e.name))}),i.a.createElement(G.a.Item,{key:"new-dictionary"},i.a.createElement(H,{to:"/dictionaries"},i.a.createElement(J.a,{type:"plus"}),i.a.createElement("span",null,"New Dictionary")))))),i.a.createElement(V.a,{className:"main"},i.a.createElement(_e,{className:"header"},i.a.createElement(q.a,{className:"header__search-bar",dataSource:u,onSelect:s,onSearch:o},i.a.createElement(Q.a.Search,{placeholder:"translate...",onSearch:s}))),i.a.createElement(Ce,{className:"content__container"},i.a.createElement("div",{className:"content"},t))))}var De=n(134),Te=n(132);var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(De.a)(Te.a,1,{upgrade:function(t){var n=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=c.value;t.createObjectStore(u)}}catch(o){a=!0,r=o}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}),n=e.map(function(e){return{get:function(){var n=Object(U.a)(P.a.mark(function n(a){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.get(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),getAll:function(){var n=Object(U.a)(P.a.mark(function n(){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAll(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),set:function(){var n=Object(U.a)(P.a.mark(function n(a,r){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=r,n.t2=a,n.abrupt("return",n.sent.put(n.t0,n.t1,n.t2));case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),delete:function(){var n=Object(U.a)(P.a.mark(function n(a){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.delete(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),clear:function(){var n=Object(U.a)(P.a.mark(function n(){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.clear(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),keys:function(){var n=Object(U.a)(P.a.mark(function n(){return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAllKeys(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()}});return Object(p.mapKeys)(n,function(t,n){return e[n]})}(["definations","dictionaries"]),Me=Ae.definations,Pe=Ae.dictionaries,Ue=new ce.b.Entity("definations"),Fe=new ce.b.Entity("words",{explanations:[{senses:[{definations:[Ue]}]}]});Ue.define({word:Fe});n(222);var We=o.c,Ke=Object(o.d)(A,We(Object(o.a)(s.a.withExtraArgument({db:a,schema:r}))));Ke.dispatch(function(){var e=Object(U.a)(P.a.mark(function e(t,n,a){var r,c,i,u,o,l,s;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.db,c=r.dictionaries.keys().then(function(e){return e.map(function(e){return r.dictionaries.get(e)})}).then(function(e){return Promise.all(e)}),i=r.definations.keys().then(function(e){return e.map(function(e){return r.definations.get(e)})}).then(function(e){return Promise.all(e)}),e.next=5,Promise.all([c,i]);case 5:return u=e.sent,o=Object(F.a)(u,2),l=o[0],s=o[1],e.abrupt("return",t({type:I,payload:{dictionaries:Object(p.mapKeys)(l,function(e){return e.id}),definations:Object(p.mapKeys)(s,function(e){return e.id})}}));case 10:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),Object(u.render)(i.a.createElement(l.a.Provider,{value:Ke},i.a.createElement(function(){return i.a.createElement(L,null,i.a.createElement(Re,{path:"/"},i.a.createElement(X,{path:"words"},i.a.createElement(ye,{path:":wordId"})),i.a.createElement(ke,{path:"dictionaries/*"})))},null)),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.f8a93090.chunk.js.map