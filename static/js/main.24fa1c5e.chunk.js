(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e){e.exports={a:"river"}},136:function(e,t,n){e.exports=n(223)},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"definations",function(){return Re}),n.d(a,"dictionaries",function(){return De});var r={};n.r(r),n.d(r,"defination",function(){return Te}),n.d(r,"word",function(){return Ae});var c=n(0),i=n.n(c),o=n(8),u=n(25),l=n(22),s=n(118),d=n(28),f=n(18),p=n(19),m="INCRESDE_WORD_SEARCH_COUNT",b="REQUEST_FETCHING_WORD",v="SUCCESS_FETCHING_WORD",y="REJECT_FETCHING_WORD",h=Object(u.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload.id;default:return e}},name:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},explanations:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},searchCounter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case m:return e+1;default:return e}},isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case b:return!0;case v:case y:return!1;default:return e}}}),E="ADD_DICTIONARY",O="DEL_DICTIONARY",j="MAP_DEFINATION_TO_DICTIONARY",g="UNMAP_DEFINATION_TO_DICTIONARY",w="ADD_ENTITIES",I="RESTORE_FROM_INDEXEDDB",k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type.includes("WORD"))return Object(f.a)({},e,Object(d.a)({},t.payload.id,h(e[t.payload.id],t)));switch(t.type){case w:case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.words,function(n){return h(Object(f.a)({},e[n.id],n),t)}));default:return e}},x=n(134),_=n(76),C=Object(u.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.id;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.name;default:return e}},definations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return[].concat(Object(_.a)(e),[t.payload.definationId]);case g:return e.filter(function(e){return e!==t.payload.definationId});default:return e}}});function S(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var N=C(void 0,{type:"@@INIT"}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d.a)({},N.id,N),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=C(void 0,t);return Object(f.a)({},e,Object(d.a)({},n.id,n));case O:var a=t.payload.dictionaryId;return e[a],Object(x.a)(e,[a].map(S));case j:case g:return Object(f.a)({},e,Object(d.a)({},t.payload.dictionaryId,C(e[t.payload.dictionaryId],t)));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.dictionaries,function(n){return C(Object(f.a)({},e[n.id],n),t)}));default:return e}},D=Object(u.b)({id:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},word:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},level:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},domain:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},text:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},translate:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},examples:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},dictionaries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return[].concat(Object(_.a)(e),[t.payload.dictionaryId]);case g:return e.filter(function(e){return e!==t.payload.dictionaryId});default:return e}}}),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return D(Object(f.a)({},e[n.id],n,{word:t.result}),t)}));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return D(Object(f.a)({},e[n.id],n),t)}));case j:case g:return Object(f.a)({},e,Object(d.a)({},t.payload.definationId,D(e[t.payload.definationId],t)));default:return e}},A=Object(u.b)({words:k,dictionaries:R,definations:T}),P=n(15),M=n.n(P),U=n(24),L=n(29),F=n(31),W=n(234),K=n(224),H=n(233),B=n(9),V=n(236),Y=n(132);function G(e){var t=e.children;return i.a.createElement("div",null,t)}var J=n(228),q=n(96),Q=n(128),X=n(232),z=n(227),Z=n(231),$=n(235),ee=n(229),te=n(58),ne="development"===Object({NODE_ENV:"production",PUBLIC_URL:""})?"http://localhost:9527":"http://river.qas612820704.now.sh";function ae(e){return re.apply(this,arguments)}function re(){return(re=Object(U.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ne,"/cambridge/english-chinese-traditional/auto-complete/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(U.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ne,"/cambridge/english-chinese-traditional/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t){return function(n,a){return a().definations[e].dictionaries.includes(t)?n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var c=r.db;n({type:g,payload:{dictionaryId:t,definationId:e}});var i=a().dictionaries[t];c.dictionaries.set(t,i),c.definations.delete(e)}}(e,t)):n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var c=r.db;n({type:j,payload:{dictionaryId:t,definationId:e}});var i=a().dictionaries[t],o=a().definations[e];c.dictionaries.set(t,i),c.definations.set(e,o)}}(e,t))}}function ue(e,t){return{type:w,payload:e,result:t}}function le(e){var t,n=Object(l.c)(Object(c.useCallback)(function(t){return t.words[e]},[e])),a=Object(l.b)();return Object(c.useEffect)(function(){},[e]),n||a((t=e,function(){var e=Object(U.a)(M.a.mark(function e(n,a,r){var c,i,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.schema,a().words[t]){e.next=17;break}return n({type:b,payload:{id:t}}),e.prev=4,e.next=7,ce(t);case 7:i=e.sent,o=Object(te.a)(i,c.word),n(ue(o.entities,o.result)),n({type:v,payload:{id:t}}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),n({type:y,payload:{id:t}});case 17:return e.abrupt("return",a().words[t]);case 18:case"end":return e.stop()}},e,null,[[4,13]])}));return function(t,n,a){return e.apply(this,arguments)}}())),{word:n}}var se=J.a.Title,de=J.a.Paragraph,fe=q.a.TabPane;function pe(e){var t=e.wordId,n=le(t).word;return n?i.a.createElement("section",{style:{margin:"16px 0"}},i.a.createElement(Q.a,{spinning:n.isFetching},i.a.createElement(se,null,t),i.a.createElement(q.a,null,n.explanations.map(function(e){return i.a.createElement(fe,{tab:i.a.createElement("span",null,i.a.createElement(K.a,{style:{background:"#008dff",marginRight:8}},e.pos),e.pos),key:e.pos},function(e){return i.a.createElement("div",null,i.a.createElement(de,{style:{marginBottom:16}},i.a.createElement(B.a,{type:"notification",style:{marginRight:16}}),i.a.createElement(ye,Object.assign({region:"US"},e.ipaUS)),i.a.createElement(ye,Object.assign({region:"UK"},e.ipaUK))),i.a.createElement(z.a,{itemLayout:"vertical",dataSource:e.senses,renderItem:me}))}(e))})))):i.a.createElement(Q.a,null,i.a.createElement(X.a,null))}function me(e){return i.a.createElement(z.a.Item,null,e.guideWord&&i.a.createElement(se,{level:4},i.a.createElement(B.a,{type:"radar-chart",style:{marginRight:8}}),e.guideWord),i.a.createElement(z.a,{bordered:!0,itemLayout:"vertical",dataSource:e.definations,renderItem:function(e){return i.a.createElement(be,{definationId:e})}}))}function be(e){var t=e.definationId,n=function(e){return{defination:Object(l.c)(Object(c.useCallback)(function(t){return t.definations[e]},[e]))}}(t).defination,a=Object(c.useState)(!1),r=Object(L.a)(a,2),o=r[0],u=r[1],s=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]),d=Object(l.b)(),f=Object(c.useCallback)(function(e,t){return d(oe(e,t))},[]),m=i.a.createElement(H.a,{onMouseLeave:function(){return u(!1)}},s.map(function(e){return i.a.createElement(H.a.Item,{key:e.id},i.a.createElement(Z.a,{checked:e.definations.includes(t),onChange:function(){return f(t,e.id)}},e.name))}));return i.a.createElement(z.a.Item,{style:{flexDirection:"column"}},i.a.createElement(z.a.Item.Meta,{title:i.a.createElement("span",null,i.a.createElement($.a,{style:{marginRight:8,background:"#52c41a"},count:n.level}),n.text),description:i.a.createElement("span",null,i.a.createElement(ee.a,{overlay:m,visible:o,onMouseEnter:function(){return u(!0)}},i.a.createElement(B.a,{type:"plus",style:{marginRight:8,cursor:"pointer"}})),i.a.createElement("span",{style:{color:"#1890ff"}},n.translate))}),i.a.createElement(z.a,{itemLayout:"vertical",dataSource:n.examples,renderItem:ve}))}function ve(e){return i.a.createElement(z.a.Item,null,i.a.createElement(de,null,e.text),i.a.createElement(de,{style:{color:"#40a9ff"}},e.translate))}function ye(e){var t=e.region,n=e.html,a=e.audioUrl,r=Object(c.useState)(!1),o=Object(L.a)(r,2),u=o[0],l=o[1],s=Object(c.useMemo)(function(){return new Audio(a)},[a]);Object(c.useEffect)(function(){s.addEventListener("ended",function(){l(!1)})},[s]);var d=Object(c.useCallback)(function(){l(!0),s.play()},[s]);return i.a.createElement("span",{style:{marginRight:16,cursor:"pointer"},onClick:d},i.a.createElement(K.a,{style:{marginRight:8,background:u?"#fa8c16":""}},t),"/",i.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),"/")}var he=n(230);function Ee(e){var t=e.dictionaryId,n=Object(l.c)(Object(c.useCallback)(function(e){var n=e.dictionaries[t];return Object(f.a)({},n,{definations:n.definations.map(function(t){return e.definations[t]})})},[t]));return i.a.createElement(z.a,{grid:{gutter:16,column:4},dataSource:n.definations,renderItem:Oe})}function Oe(e){return i.a.createElement(z.a.Item,null,i.a.createElement(he.a,null,i.a.createElement(he.a.Meta,{title:i.a.createElement("span",null,i.a.createElement($.a,{style:{marginRight:8,background:"#52c41a"},count:e.level}),i.a.createElement(F.a,{to:"/words/".concat(e.word)},e.word)),description:e.translate})))}function je(){var e=Object(c.useState)(""),t=Object(L.a)(e,2),n=t[0],a=t[1],r=Object(l.b)(),o=Object(c.useCallback)(function(){var e;a(""),r((e={name:n},function(t,n,a){var r=a.db,c=e.name;t({type:E,payload:Object(f.a)({id:c},e)});var i=n().dictionaries[c];r.dictionaries.set(c,i)}))},[n]);return i.a.createElement("div",null,i.a.createElement(Y.a,{value:n,onChange:function(e){return a(e.target.value)},onPressEnter:o,placeholder:"Add dictionary",suffix:i.a.createElement(B.a,{onClick:o,type:"plus"}),style:{marginBottom:"2em"}}),i.a.createElement(F.b,null,i.a.createElement(ge,{path:"/"}),i.a.createElement(Ee,{path:":dictionaryId"})))}function ge(){var e=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]);return i.a.createElement("div",null,i.a.createElement(z.a,{grid:{gutter:16,column:4},dataSource:e,renderItem:function(e){return i.a.createElement(we,{dictionary:e})}}))}function we(e){var t=e.dictionary,n=Object(l.b)(),a=Object(c.useCallback)(function(){return n((e=t.id,function(t,n,a){var r=a.db;t({type:O,payload:{dictionaryId:e}}),r.dictionaries.delete(e)}));var e},[t.id]);return i.a.createElement(z.a.Item,{style:{cursor:"pointer"},onClick:function(){return Object(F.c)("/dictionaries/".concat(t.id))}},i.a.createElement(he.a,null,i.a.createElement(he.a.Meta,{title:i.a.createElement("span",null,"default"!==t.id&&i.a.createElement(B.a,{type:"minus",style:{marginRight:8,color:"#f5222d"},onClick:a}),t.name)})))}n(221);var Ie=W.a.Header,ke=W.a.Content,xe=W.a.Sider;function _e(e){var t=e.children,n=function(){var e=Object(l.c)(Object(c.useCallback)(function(e){return e.dictionaries},[]));return{dictionaries:Object(p.map)(e)}}().dictionaries,a=function(){var e=Object(c.useState)([]),t=Object(L.a)(e,2),n=t[0],a=t[1],r=Object(c.useCallback)(function(){var e=Object(U.a)(M.a.mark(function e(t){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae(t);case 4:n=e.sent,r=n.results,a(r.map(function(e){return e.searchtext}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);return[n,r]}(),r=Object(L.a)(a,2),o=r[0],u=r[1],s=Object(c.useCallback)(function(e){return Object(F.c)("/words/".concat(e))},[]);return i.a.createElement(W.a,null,i.a.createElement(xe,{className:"sider",collapsible:!0,collapsedWidth:"0"},i.a.createElement("div",{className:"sider__brand"},i.a.createElement(K.a,{className:"sider__brand__avatar"},"R")),i.a.createElement(H.a,{theme:"dark",mode:"inline",defaultOpenKeys:["dictionaries"]},i.a.createElement(H.a.SubMenu,{key:"dictionaries",title:i.a.createElement("span",null,i.a.createElement(B.a,{type:"book"}),i.a.createElement("span",null,"Dictionaries"))},n.map(function(e){return i.a.createElement(H.a.Item,{key:e.id},i.a.createElement(F.a,{to:"/dictionaries/".concat(e.id)},e.name))}),i.a.createElement(H.a.Item,{key:"new-dictionary"},i.a.createElement(F.a,{to:"/dictionaries"},i.a.createElement(B.a,{type:"plus"}),i.a.createElement("span",null,"New Dictionary")))))),i.a.createElement(W.a,{className:"main"},i.a.createElement(Ie,{className:"header"},i.a.createElement(V.a,{className:"header__search-bar",dataSource:o,onSelect:s,onSearch:u},i.a.createElement(Y.a.Search,{placeholder:"translate...",onSearch:s}))),i.a.createElement(ke,{className:"content__container"},i.a.createElement("div",{className:"content"},t))))}var Ce=n(133),Se=n(131);var Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(Ce.a)(Se.a,1,{upgrade:function(t){var n=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value;t.createObjectStore(o)}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}),n=e.map(function(e){return{get:function(){var n=Object(U.a)(M.a.mark(function n(a){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.get(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),getAll:function(){var n=Object(U.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAll(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),set:function(){var n=Object(U.a)(M.a.mark(function n(a,r){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=r,n.t2=a,n.abrupt("return",n.sent.put(n.t0,n.t1,n.t2));case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),delete:function(){var n=Object(U.a)(M.a.mark(function n(a){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.delete(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),clear:function(){var n=Object(U.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.clear(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),keys:function(){var n=Object(U.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAllKeys(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()}});return Object(p.mapKeys)(n,function(t,n){return e[n]})}(["definations","dictionaries"]),Re=Ne.definations,De=Ne.dictionaries,Te=new te.b.Entity("definations"),Ae=new te.b.Entity("words",{explanations:[{senses:[{definations:[Te]}]}]});Te.define({word:Ae});n(222);var Pe=u.c,Me=Object(u.d)(A,Pe(Object(u.a)(s.a.withExtraArgument({db:a,schema:r}))));Me.dispatch(function(){var e=Object(U.a)(M.a.mark(function e(t,n,a){var r,c,i,o,u,l,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.db,c=r.dictionaries.keys().then(function(e){return e.map(function(e){return r.dictionaries.get(e)})}).then(function(e){return Promise.all(e)}),i=r.definations.keys().then(function(e){return e.map(function(e){return r.definations.get(e)})}).then(function(e){return Promise.all(e)}),e.next=5,Promise.all([c,i]);case 5:return o=e.sent,u=Object(L.a)(o,2),l=u[0],s=u[1],e.abrupt("return",t({type:I,payload:{dictionaries:Object(p.mapKeys)(l,function(e){return e.id}),definations:Object(p.mapKeys)(s,function(e){return e.id})}}));case 10:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),Object(o.render)(i.a.createElement(l.a.Provider,{value:Me},i.a.createElement(function(){return i.a.createElement(F.b,null,i.a.createElement(_e,{path:"/"},i.a.createElement(G,{path:"words"},i.a.createElement(pe,{path:":wordId"})),i.a.createElement(je,{path:"dictionaries/*"})))},null)),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.24fa1c5e.chunk.js.map